@inject HttpClient httpClient


<div class="game-card-container">
    @if (games != null && games.Count() > 0) {
        for (int i = 0; i < games.Count(); i++) {
            <GameCard gameName=@games[i].Name thumbnail=@games[i].Cover.Image_Id rating=@games[i].Rating genre=@games[i].Genres.FirstOrDefault().Name/>
        }
    }
    else {
        <p>Loading</p>
    }
</div>

@code {
    [Parameter]
    public string Endpoint {get; set;} = "";

    //call backend for gamedata
    private List<Game>? games = new List<Game>();

    protected override async Task OnInitializedAsync()
    {
        var response = await httpClient.GetAsync($"http://localhost:5249/{Endpoint}");
        if (response.IsSuccessStatusCode)
        {
            games = await response.Content.ReadFromJsonAsync<List<Game>>();
            for (int i = 0; i < games.Count(); i++) {
                Console.WriteLine(games[i].Name);
            }
        }
        else
        {
            // Handle error
        }
    }

}